package com.solbox.delivery.vm;

import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

public class App {
	private static final String getTokenURL = "https://api.ucloudbiz.olleh.com/d1/identity/auth/tokens";
	private static final String getVMURL = "https://api.ucloudbiz.olleh.com/d1/server/servers";
	private static final String forceDeleteVMURL = "https://api.ucloudbiz.olleh.com/d1/server/servers/";
	private static final String getVolumeURL = "https://api.ucloudbiz.olleh.com/d1/volume/c3d6ced17b1d45d98af60cbeff8f4bbd/volumes";
	private static final String connectVMAndVolumeURL = "https://api.ucloudbiz.olleh.com/d1/server/servers/f2097e46-be6d-488b-a250-95a3d6856936/os-volume_attachments";

	
	private static final String GET = "GET";
	private static final String POST = "POST";
	private static final String USER_AGENT = "Mozilla/5.0";
	private static final String CONTENT_TYPE = "application/json";
	private static String requestBody;
	
	public static void main(String[] args) {
		try {
			requestBody = RequestBody.getToken();
			String token = Utils.getToken(getTokenURL, POST, USER_AGENT, CONTENT_TYPE, requestBody);

			requestBody = RequestBody.getVM();
			Utils.request(getVMURL, POST, token, USER_AGENT, CONTENT_TYPE, requestBody);
			
			// String vmId = "4b2792c0-0a16-4ba8-b513-769b31c35aab";
			// Utils.forceDeleteVM(forceDeleteVMURL, vmId, POST, token, USER_AGENT,
			// CONTENT_TYPE);
			
			requestBody = RequestBody.getVolume();
			Utils.request(getVolumeURL, POST, token, USER_AGENT, CONTENT_TYPE, requestBody);
		 
			requestBody = RequestBody.connectVMAndVolume("test");
			Utils.request(getVolumeURL, POST, token, USER_AGENT, CONTENT_TYPE, requestBody);
			
			
		} catch (Exception e) {
			System.out.println(e);
		}
	}
}