package com.solbox.delivery.vm;

import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

public class App {
	private static final String getTokenURL = "https://api.ucloudbiz.olleh.com/d1/identity/auth/tokens";
	private static final String getVMURL = "https://api.ucloudbiz.olleh.com/d1/server/servers";
	private static final String forceDeleteVMURL = "https://api.ucloudbiz.olleh.com/d1/server/servers/";
	private static final String getVolumeURL = "https://api.ucloudbiz.olleh.com/d1/volume/c3d6ced17b1d45d98af60cbeff8f4bbd/volumes";
	private static final String connectVMAndVolumeURL = "https://api.ucloudbiz.olleh.com/d1/server/servers/8afe175e-73dd-4f89-a02e-128559e670a4/os-volume_attachments";
	private static final String deleteIP = "https://api.ucloudbiz.olleh.com/d1/nc/IpAddress/0c444e7b-503a-406f-a2e1-a61072482e80";
	
	private static final String GET = "GET";
	private static final String DELETE = "DELETE";
	private static final String POST = "POST";
	private static final String USER_AGENT = "Mozilla/5.0";
	private static final String CONTENT_TYPE = "application/json";
	private static String requestBody;
	
	public static void main(String[] args) {
		try {
			requestBody = RequestBody.getToken();
			String token = Utils.getToken(getTokenURL, POST, USER_AGENT, CONTENT_TYPE, requestBody);

			//Utils.request(getVMURL, POST, token, USER_AGENT, CONTENT_TYPE, RequestBody.getVM());
			
			// String vmId = "4b2792c0-0a16-4ba8-b513-769b31c35aab";
			// Utils.forceDeleteVM(forceDeleteVMURL, vmId, POST, token, USER_AGENT,
			// CONTENT_TYPE);
			
			//Utils.request(getVolumeURL, POST, token, USER_AGENT, CONTENT_TYPE, RequestBody.getVolume());
		 
			//Utils.request(connectVMAndVolumeURL, POST, token, USER_AGENT, CONTENT_TYPE, RequestBody.connectVMAndVolume("f054f378-7e61-4f56-bac0-88e7123607f2"));
			Utils.request(deleteIP, DELETE, token, USER_AGENT, CONTENT_TYPE);
			
		} catch (Exception e) {
			System.out.println(e);
		}
	}
}